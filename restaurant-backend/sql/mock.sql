-- ============================================
-- 初始化数据
-- ============================================

-- --------------------------------------------
-- 1. 默认用户数据
-- --------------------------------------------
-- 管理员账号 (密码: admin123)
-- 使用BCrypt加密: $2a$10$mciZPeRnfG5ItblWmeBKauVHbCEhWCLna3zEZdbNjabOnpZ8daWqW
INSERT INTO `sys_user` (`username`, `password`, `real_name`, `role`, `status`) VALUES
('admin', '$2a$10$mciZPeRnfG5ItblWmeBKauVHbCEhWCLna3zEZdbNjabOnpZ8daWqW', '管理员', 2, 1);

-- 服务员账号 (密码: 123456)
INSERT INTO `sys_user` (`username`, `password`, `real_name`, `role`, `status`) VALUES
('waiter', '$2a$10$mciZPeRnfG5ItblWmeBKauVHbCEhWCLna3zEZdbNjabOnpZ8daWqW', '服务员1', 1, 1);

-- --------------------------------------------
-- 2. 桌台数据 (8个卡座 + 2个包厢)
-- --------------------------------------------
INSERT INTO `restaurant_table` (`table_no`, `name`, `type`, `capacity`, `status`, `sort_order`) VALUES
('A01', '包厢1', 1, 8, 0, 1),
('A02', '包厢2', 1, 6, 0, 2),
('B01', '卡座1', 1, 4, 0, 3),
('B02', '卡座2', 1, 4, 0, 4),
('B03', '卡座3', 1, 4, 0, 5),
('B04', '卡座4', 1, 4, 0, 6),
('B05', '卡座5', 1, 4, 0, 7),
('B06', '卡座6', 1, 4, 0, 8),
('B07', '卡座7', 1, 4, 0, 9),
('B08', '卡座8', 1, 4, 0, 10);

-- --------------------------------------------
-- 3. 菜品分类数据
-- --------------------------------------------
INSERT INTO `dish_category` (`name`, `sort_order`, `status`) VALUES
('招牌菜', 1, 1),
('热菜', 2, 1),
('凉菜', 3, 1),
('汤羹', 4, 1),
('主食', 5, 1),
('饮品', 6, 1);

-- --------------------------------------------
-- 4. 菜品数据
-- --------------------------------------------
INSERT INTO `dish` (`category_id`, `name`, `description`, `price`, `is_recommend`, `status`, `sort_order`, `has_specs`) VALUES
(1, '宫保鸡丁', '经典川菜，鸡肉鲜嫩，花生香脆', 38.00, 1, 1, 1, 1),
(1, '水煮鱼', '麻辣鲜香，鱼肉嫩滑', 68.00, 1, 1, 2, 1),
(2, '麻婆豆腐', '麻辣鲜香，下饭神器', 18.00, 0, 1, 1, 0),
(2, '回锅肉', '肥而不腻，香味浓郁', 28.00, 0, 1, 2, 0),
(2, '糖醋排骨', '酸甜可口，老少皆宜', 48.00, 1, 1, 3, 1),
(3, '拍黄瓜', '清爽解腻，开胃小菜', 12.00, 0, 1, 1, 0),
(3, '凉拌木耳', '营养丰富，爽口健康', 16.00, 0, 1, 2, 0),
(4, '酸辣汤', '酸辣开胃，暖胃佳品', 12.00, 0, 1, 1, 0),
(4, '紫菜蛋花汤', '清淡鲜美，老少皆宜', 10.00, 0, 1, 2, 0),
(5, '米饭', '香喷喷的大米饭', 2.00, 0, 1, 1, 0),
(5, '蛋炒饭', '金黄诱人，粒粒分明', 15.00, 0, 1, 2, 1),
(6, '雪碧', '清爽碳酸饮料', 5.00, 0, 1, 1, 0),
(6, '可乐', '经典可口可乐', 5.00, 0, 1, 2, 0);

-- 更多菜品
INSERT INTO `dish` (`category_id`, `name`, `description`, `price`, `is_recommend`, `status`, `sort_order`, `has_specs`) VALUES
(1, '鱼香肉丝', '酸甜微辣，肉丝滑嫩', 32.00, 1, 1, 4, 0),
(1, '干煸四季豆', '干香麻辣，下饭神器', 26.00, 0, 1, 5, 0),
(2, '蒜蓉西兰花', '蒜香浓郁，营养健康', 22.00, 0, 1, 4, 0),
(2, '地三鲜', '东北名菜，鲜香美味', 24.00, 0, 1, 5, 0),
(2, '西红柿炒蛋', '家常菜之王，酸甜可口', 18.00, 0, 1, 6, 0),
(3, '蒜泥白肉', '肉质鲜嫩，蒜香四溢', 36.00, 0, 1, 3, 0),
(3, '凉拌海带丝', '爽口开胃，低脂健康', 12.00, 0, 1, 4, 0),
(4, '冬瓜排骨汤', '清淡滋补，老少皆宜', 28.00, 0, 1, 3, 0),
(4, '玉米排骨汤', '甜香浓郁，营养丰富', 32.00, 0, 1, 4, 0),
(5, '面条', '劲道爽滑，配汤极佳', 8.00, 0, 1, 3, 0),
(5, '馒头', '松软可口，家常主食', 2.00, 0, 1, 4, 0),
(6, '鲜榨橙汁', '现榨新鲜，维C满满', 15.00, 0, 1, 3, 0),
(6, '豆浆', '现磨香浓，营养早餐', 5.00, 0, 1, 4, 0);

-- --------------------------------------------
-- 5. 菜品规格数据
-- --------------------------------------------
INSERT INTO `dish_spec` (`dish_id`, `name`, `price`, `sort_order`, `status`) VALUES
(1, '小份', 28.00, 1, 1),  -- 宫保鸡丁小份
(1, '大份', 48.00, 2, 1),  -- 宫保鸡丁大份
(2, '小份', 48.00, 1, 1),  -- 水煮鱼小份
(2, '大份', 88.00, 2, 1),  -- 水煮鱼大份
(3, '例份', 18.00, 1, 1),  -- 麻婆豆腐
(4, '例份', 28.00, 1, 1),  -- 回锅肉
(5, '小份', 38.00, 1, 1),  -- 糖醋排骨小份
(5, '大份', 58.00, 2, 1),  -- 糖醋排骨大份
(11, '小份', 12.00, 1, 1), -- 蛋炒饭小份
(11, '大份', 20.00, 2, 1); -- 蛋炒饭大份

-- --------------------------------------------
-- 6. 原料数据 (库存管理)
-- --------------------------------------------
INSERT INTO `inventory_item` (`code`, `name`, `category`, `main_unit`, `aux_unit`, `conversion_rate`, `current_stock`, `reserved_stock`, `available_stock`, `safety_stock`, `warning_status`, `status`) VALUES
('MEAT001', '鸡胸肉', '肉类', 'g', 'kg', 1000.0000, 12500.00, 0, 12500.00, 5000.00, 0, 1),
('MEAT002', '猪肉', '肉类', 'g', 'kg', 1000.0000, 8200.00, 0, 8200.00, 3000.00, 0, 1),
('MEAT003', '牛肉', '肉类', 'g', 'kg', 1000.0000, 5600.00, 0, 5600.00, 2000.00, 0, 1),
('MEAT004', '鱼肉', '肉类', 'g', 'kg', 1000.0000, 4300.00, 0, 4300.00, 2000.00, 0, 1),
('MEAT005', '虾仁', '肉类', 'g', 'kg', 1000.0000, 2800.00, 0, 2800.00, 1500.00, 1, 1),
('VEG001', '青菜', '蔬菜', 'g', 'kg', 1000.0000, 0.00, 0, 0.00, 2000.00, 2, 1),
('VEG002', '土豆', '蔬菜', 'g', 'kg', 1000.0000, 3500.00, 0, 3500.00, 5000.00, 1, 1),
('VEG003', '西红柿', '蔬菜', 'g', 'kg', 1000.0000, 6200.00, 0, 6200.00, 3000.00, 0, 1),
('VEG004', '黄瓜', '蔬菜', 'g', 'kg', 1000.0000, 4100.00, 0, 4100.00, 2000.00, 0, 1),
('VEG005', '木耳', '蔬菜', 'g', 'kg', 1000.0000, 1500.00, 0, 1500.00, 1000.00, 0, 1),
('VEG006', '豆腐', '豆制品', 'g', 'kg', 1000.0000, 3200.00, 0, 3200.00, 2000.00, 0, 1),
('SPICE001', '干辣椒', '调料', 'g', 'kg', 1000.0000, 2300.00, 0, 2300.00, 1000.00, 0, 1),
('SPICE002', '花椒', '调料', 'g', 'kg', 1000.0000, 850.00, 0, 850.00, 500.00, 0, 1),
('SPICE003', '大蒜', '调料', 'g', 'kg', 1000.0000, 5000.00, 0, 5000.00, 2000.00, 0, 1),
('SPICE004', '生姜', '调料', 'g', 'kg', 1000.0000, 1800.00, 0, 1800.00, 1000.00, 0, 1),
('GRAIN001', '大米', '主食', 'g', 'kg', 1000.0000, 25000.00, 0, 25000.00, 10000.00, 0, 1),
('GRAIN002', '鸡蛋', '蛋禽', '个', NULL, 1.0000, 120.00, 0, 120.00, 50.00, 0, 1),
('OTHER001', '食用油', '油料', 'ml', 'L', 1000.0000, 15000.00, 0, 15000.00, 5000.00, 0, 1),
('OTHER002', '花生米', '干货', 'g', 'kg', 1000.0000, 3200.00, 0, 3200.00, 1500.00, 0, 1);

-- --------------------------------------------
-- 7. 菜品配方数据
-- --------------------------------------------
INSERT INTO `dish_recipe` (`dish_id`, `spec_id`, `inventory_item_id`, `quantity`, `is_main`, `sort_order`) VALUES
-- 宫保鸡丁 (ID=1) 小份配方
(1, 1, 1, 300.00, 1, 1),    -- 鸡胸肉300g
(1, 1, 19, 50.00, 0, 2),    -- 花生米50g
(1, 1, 14, 20.00, 0, 3),    -- 大蒜20g
-- 宫保鸡丁 (ID=1) 大份配方
(1, 2, 1, 500.00, 1, 1),    -- 鸡胸肉500g
(1, 2, 19, 80.00, 0, 2),    -- 花生米80g
(1, 2, 14, 30.00, 0, 3),    -- 大蒜30g
-- 水煮鱼 (ID=2) 小份配方
(2, 3, 4, 400.00, 1, 1),    -- 鱼肉400g
(2, 3, 12, 100.00, 0, 2),   -- 干辣椒100g
(2, 3, 13, 30.00, 0, 3),    -- 花椒30g
-- 水煮鱼 (ID=2) 大份配方
(2, 4, 4, 700.00, 1, 1),    -- 鱼肉700g
(2, 4, 12, 150.00, 0, 2),   -- 干辣椒150g
(2, 4, 13, 50.00, 0, 3),    -- 花椒50g
-- 麻婆豆腐 (ID=3)
(3, NULL, 6, 400.00, 1, 1),  -- 豆腐400g
(3, NULL, 2, 100.00, 1, 2),  -- 猪肉末100g
(3, NULL, 12, 30.00, 0, 3),  -- 干辣椒30g
-- 回锅肉 (ID=4)
(4, NULL, 2, 300.00, 1, 1),  -- 猪肉300g
(4, NULL, 12, 20.00, 0, 2),  -- 干辣椒20g
-- 糖醋排骨 (ID=5) 小份
(5, 5, 2, 300.00, 1, 1),     -- 猪肉300g
-- 糖醋排骨 (ID=5) 大份
(5, 6, 2, 500.00, 1, 1),     -- 猪肉500g
-- 拍黄瓜 (ID=6)
(6, NULL, 4, 300.00, 1, 1),  -- 黄瓜300g
(6, NULL, 14, 15.00, 0, 2),  -- 大蒜15g
-- 凉拌木耳 (ID=7)
(7, NULL, 5, 100.00, 1, 1),  -- 木耳100g
(7, NULL, 14, 10.00, 0, 2),  -- 大蒜10g
-- 酸辣汤 (ID=8)
(8, NULL, 5, 50.00, 1, 1),   -- 木耳50g
(8, NULL, 3, 100.00, 1, 2),  -- 西红柿100g
(8, NULL, 18, 5.00, 0, 3),   -- 鸡蛋1个
-- 紫菜蛋花汤 (ID=9)
(9, NULL, 18, 2.00, 1, 1),   -- 鸡蛋2个
-- 蛋炒饭 (ID=11) 小份
(11, 7, 16, 200.00, 1, 1),   -- 大米200g
(11, 7, 18, 1.00, 1, 2),     -- 鸡蛋1个
-- 蛋炒饭 (ID=11) 大份
(11, 8, 16, 300.00, 1, 1),   -- 大米300g
(11, 8, 18, 2.00, 1, 2);     -- 鸡蛋2个

-- --------------------------------------------
-- 8. 支付设置数据
-- --------------------------------------------
INSERT INTO `payment_setting` (`type`, `name`, `qrcode_image`, `is_default`, `status`) VALUES
(1, '微信支付', 'https://example.com/wechat-pay.png', 1, 1),
(2, '支付宝', 'https://example.com/alipay.png', 0, 1);

-- --------------------------------------------
-- 9. 示例订单数据
-- --------------------------------------------
INSERT INTO `orders` (`order_no`, `table_id`, `table_no`, `customer_count`, `total_amount`, `discount_amount`, `pay_amount`, `pay_type`, `pay_time`, `status`, `remark`) VALUES
('ORD202602280001', 1, 'A01', 6, 268.00, 0.00, 268.00, 3, DATE_SUB(NOW(), INTERVAL 2 HOUR), 3, '包厢客人，要求加辣'),
('ORD202602280002', 3, 'B01', 4, 156.00, 0.00, 156.00, 1, DATE_SUB(NOW(), INTERVAL 1 HOUR), 3, ''),
('ORD202602280003', 5, 'B03', 2, 89.00, 0.00, 89.00, 2, DATE_SUB(NOW(), INTERVAL 30 MINUTE), 3, ''),
('ORD202602280004', 2, 'A02', 4, 198.00, 0.00, 198.00, 0, NULL, 1, '暂不上菜，等人到齐'),
('ORD202602280005', 4, 'B02', 3, 125.00, 0.00, 125.00, 0, NULL, 0, '');

-- --------------------------------------------
-- 10. 示例订单明细数据
-- --------------------------------------------
INSERT INTO `order_item` (`order_id`, `dish_id`, `spec_id`, `dish_name`, `spec_name`, `price`, `quantity`, `subtotal`, `status`, `is_paid`) VALUES
-- 订单1 (已完成)
(1, 1, 2, '宫保鸡丁', '大份', 48.00, 1, 48.00, 2, 1),
(1, 2, 4, '水煮鱼', '大份', 88.00, 1, 88.00, 2, 1),
(1, 6, NULL, '拍黄瓜', NULL, 12.00, 1, 12.00, 2, 1),
(1, 11, 8, '蛋炒饭', '大份', 20.00, 3, 60.00, 2, 1),
(1, 10, NULL, '米饭', NULL, 2.00, 6, 12.00, 2, 1),
(1, 12, NULL, '雪碧', NULL, 5.00, 4, 20.00, 2, 1),
-- 订单2 (已完成)
(2, 4, NULL, '回锅肉', NULL, 28.00, 1, 28.00, 2, 1),
(2, 3, NULL, '麻婆豆腐', NULL, 18.00, 1, 18.00, 2, 1),
(2, 16, NULL, '西红柿炒蛋', NULL, 18.00, 1, 18.00, 2, 1),
(2, 6, NULL, '拍黄瓜', NULL, 12.00, 1, 12.00, 2, 1),
(2, 10, NULL, '米饭', NULL, 2.00, 4, 8.00, 2, 1),
(2, 13, NULL, '可乐', NULL, 5.00, 2, 10.00, 2, 1),
(2, 24, NULL, '玉米排骨汤', NULL, 32.00, 1, 32.00, 2, 1),
(2, 22, NULL, '冬瓜排骨汤', NULL, 28.00, 1, 28.00, 2, 1),
-- 订单3 (已完成)
(3, 1, 1, '宫保鸡丁', '小份', 28.00, 1, 28.00, 2, 1),
(3, 15, NULL, '蒜蓉西兰花', NULL, 22.00, 1, 22.00, 2, 1),
(3, 10, NULL, '米饭', NULL, 2.00, 2, 4.00, 2, 1),
(3, 26, NULL, '豆浆', NULL, 5.00, 2, 10.00, 2, 1),
(3, 25, NULL, '鲜榨橙汁', NULL, 15.00, 1, 15.00, 2, 1),
-- 订单4 (待上菜)
(4, 2, 3, '水煮鱼', '小份', 48.00, 1, 48.00, 0, 0),
(4, 18, NULL, '蒜泥白肉', NULL, 36.00, 1, 36.00, 0, 0),
(4, 17, NULL, '地三鲜', NULL, 24.00, 1, 24.00, 0, 0),
(4, 8, NULL, '酸辣汤', NULL, 12.00, 1, 12.00, 0, 0),
(4, 10, NULL, '米饭', NULL, 2.00, 4, 8.00, 0, 0),
(4, 12, NULL, '雪碧', NULL, 5.00, 2, 10.00, 0, 0),
-- 订单5 (上菜中)
(5, 5, 5, '糖醋排骨', '小份', 38.00, 1, 38.00, 1, 0),
(5, 7, NULL, '凉拌木耳', NULL, 16.00, 1, 16.00, 1, 0),
(5, 9, NULL, '紫菜蛋花汤', NULL, 10.00, 1, 10.00, 1, 0),
(5, 11, 7, '蛋炒饭', '小份', 12.00, 2, 24.00, 1, 0),
(5, 13, NULL, '可乐', NULL, 5.00, 2, 10.00, 1, 0),
(5, 27, NULL, '馒头', NULL, 2.00, 4, 8.00, 1, 0);

-- ============================================
-- 完成
-- ============================================
SET FOREIGN_KEY_CHECKS = 1;

-- 验证数据
SELECT '数据库初始化完成' AS result;
SELECT CONCAT('用户表: ', COUNT(*), ' 条') AS count FROM sys_user;
SELECT CONCAT('桌台表: ', COUNT(*), ' 条') AS count FROM restaurant_table;
SELECT CONCAT('菜品分类: ', COUNT(*), ' 条') AS count FROM dish_category;
SELECT CONCAT('菜品表: ', COUNT(*), ' 条') AS count FROM dish;
SELECT CONCAT('菜品规格: ', COUNT(*), ' 条') AS count FROM dish_spec;
SELECT CONCAT('订单表: ', COUNT(*), ' 条') AS count FROM orders;
SELECT CONCAT('订单明细: ', COUNT(*), ' 条') AS count FROM order_item;
SELECT CONCAT('原料表: ', COUNT(*), ' 条') AS count FROM inventory_item;
SELECT CONCAT('菜品配方: ', COUNT(*), ' 条') AS count FROM dish_recipe;
SELECT CONCAT('支付设置: ', COUNT(*), ' 条') AS count FROM payment_setting;